<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Crunchyroll</title>
</head>
<body>
<div id="CrunchyrollPluginConfigPage" data-role="page" class="page type-interior pluginConfigurationPage" data-require="emby-input,emby-button,emby-select,emby-checkbox">
    <div data-role="content">
        <div class="content-primary">
            <form id="CrunchyrollPluginConfigForm">
                <div class="inputContainer">
                    <label class="inputLabel inputLabelUnfocused" for="CrunchyrollUrl">CrunchyrollUrl</label>
                    <input id="CrunchyrollUrl" name="CrunchyrollUrl" type="text" is="emby-input" />
                    <div class="fieldDescription">CrunchyrollUrl</div>
                </div>
                <div class="inputContainer">
                    <label class="inputLabel inputLabelUnfocused" for="ArchiveOrgUrl">ArchiveOrgUrl</label>
                    <input id="ArchiveOrgUrl" name="ArchiveOrgUrl" type="text" is="emby-input" />
                    <div class="fieldDescription">ArchiveOrgUrl</div>
                </div>
                <div class="inputContainer">
                    <label class="inputLabel inputLabelUnfocused" for="LocalDatabasePath">LocalDatabasePath</label>
                    <input id="LocalDatabasePath" name="LocalDatabasePath" type="text" is="emby-input" />
                    <div class="fieldDescription">default: empty; if you want a different path instead of the plugin folder, enter here the absolute path</div>
                </div>
                <div class="inputContainer">
                    <label class="inputLabel inputLabelUnfocused" for="LibraryName">LibraryName</label>
                    <input id="LibraryName" name="LibraryName" type="text" is="emby-input" />
                    <div class="fieldDescription">It is recommended to specify which collection/library to scan for. 
                        Good if you have an Anime-Library and specify only the name here.
                        Keep it empty to scan in all collections</div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsScanInAllLibrariesEnabled" name="IsScanInAllLibrariesEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Run Crunchyroll-Scan in all libraries</span>
                    </label>
                    <div class="fieldDescription">
                        This enforces the plugin to ignore the setting for the library name, and it runs the scan in all libraries.
                        Should only be enabled if you have only libraries with anime content
                    </div>
                </div>
                
                <hr/>
                
                <h1>Features</h1>
                <h3>Crunchyroll</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureCrunchyrollUpdateEnabled" name="IsFeatureCrunchyrollUpdateEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Update to the newest Crunchyroll data</span>
                    </label>
                    <div class="fieldDescription">
                        This is necessary to get the latest Crunchyroll data, but you can choose to disable it. If disabled,
                        the metadata that is overwritten to your jellyfin items will be old and new series, seasons & episodes,
                        won't get metadata from Crunchyroll.
                    </div>
                </div>
                
                <h3>Series</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesTitleEnabled" name="IsFeatureSeriesTitleEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll title name</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesDescriptionEnabled" name="IsFeatureSeriesDescriptionEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll description</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesStudioEnabled" name="IsFeatureSeriesStudioEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll studio info</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesRatingsEnabled" name="IsFeatureSeriesRatingsEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll ratings as community ratings</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesCoverImageEnabled" name="IsFeatureSeriesCoverImageEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Download and use Crunchyroll cover image</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeriesBackgroundImageEnabled" name="IsFeatureSeriesBackgroundImageEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Download and use Crunchyroll backdrop image</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>

                <h3>Season</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeasonTitleEnabled" name="IsFeatureSeasonTitleEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll title name</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureSeasonOrderByCrunchyrollOrderEnabled" name="IsFeatureSeasonOrderByCrunchyrollOrderEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Order seasons by Crunchyroll order/listing</span>
                    </label>
                    <div class="fieldDescription">
                        Feature to order your seasons in the the crunchyroll order. For exmaple, Seasons with
                        OADs or movies will be ordered in between season 1 and 2.
                        Be aware that if you decide to delete the plugin, this option can leave a mess (You probably need to recreate the library/collection)
                    </div>
                </div>
                
                <h3>Episode</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureEpisodeTitleEnabled" name="IsFeatureEpisodeTitleEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll title name</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureEpisodeDescriptionEnabled" name="IsFeatureEpisodeDescriptionEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll description</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureEpisodeThumbnailImageEnabled" name="IsFeatureEpisodeThumbnailImageEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Download and use Crunchyroll thumbnail image</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled" name="IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll description</span>
                    </label>
                    <div class="fieldDescription">
                        Enables special/ova episodes in normal seasons. An example would be One Piece season 13, episode: "S13: E-SP".
                        Basically, you will be able to put the episode file into the season 13 folder and not need to put it in "Season 0" folder.
                        It also automatically sets the episode to air in between those episodes.
                    </div>
                </div>

                <h3>Movie</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureMovieTitleEnabled" name="IsFeatureMovieTitleEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll title name</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureMovieDescriptionEnabled" name="IsFeatureMovieDescriptionEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll description</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureMovieStudioEnabled" name="IsFeatureMovieStudioEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Use Crunchyroll studio info</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsFeatureMovieThumbnailImageEnabled" name="IsFeatureMovieThumbnailImageEnabled" type="checkbox" is="emby-checkbox" />
                        <span>Download and use Crunchyroll thumbnail image</span>
                    </label>
                    <div class="fieldDescription"></div>
                </div>

                <h3>Reviews & Comments</h3>
                <div class="inputContainer">
                    <label class="emby-checkbox-label">
                        <input id="IsWaybackMachineEnabled" name="IsWaybackMachineEnabled" type="checkbox" is="emby-checkbox" />
                        <span>IsWaybackMachineEnabled</span>
                    </label>
                    <div class="fieldDescription">
                        Enables reviews on detail page for series and comments on detail page for episodes
                    </div>
                </div>
                <div class="inputContainer">
                    <label class="inputLabel inputLabelUnfocused" for="WaybackMachineWaitTimeoutInSeconds">WaybackMachineWaitTimeoutInSeconds</label>
                    <input id="WaybackMachineWaitTimeoutInSeconds" name="WaybackMachineWaitTimeoutInSeconds" type="number" is="emby-input" min="0" />
                    <div class="fieldDescription">Timeout in seconds; This timeout only occurs when the request to wayback machine is throttled
                        or refused due to the ddos protection</div>
                </div>
                
                <div>
                    <button is="emby-button" type="submit" class="raised button-submit block emby-button">
                        <span>Save</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        var CrunchyrollPluginConfig = {
            pluginUniqueId: 'c6f8461a-9a6f-4c65-8bb9-825866cabc91'
        };

        document.querySelector('#CrunchyrollPluginConfigPage')
            .addEventListener('pageshow', function() {
                Dashboard.showLoadingMsg();
                ApiClient.getPluginConfiguration(CrunchyrollPluginConfig.pluginUniqueId).then(function (config) {
                    document.querySelector('#CrunchyrollUrl').value = config.CrunchyrollUrl;
                    document.querySelector('#ArchiveOrgUrl').value = config.ArchiveOrgUrl;
                    document.querySelector('#LocalDatabasePath').value = config.LocalDatabasePath;
                    document.querySelector('#IsWaybackMachineEnabled').checked = config.IsWaybackMachineEnabled;
                    document.querySelector('#LibraryName').value = config.LibraryName;
                    document.querySelector('#IsScanInAllLibrariesEnabled').checked = config.IsScanInAllLibrariesEnabled;
                    document.querySelector('#WaybackMachineWaitTimeoutInSeconds').value = config.WaybackMachineWaitTimeoutInSeconds;
                    document.querySelector('#IsFeatureCrunchyrollUpdateEnabled').checked = config.IsFeatureCrunchyrollUpdateEnabled;

                    document.querySelector('#IsFeatureSeriesTitleEnabled').checked = config.IsFeatureSeriesTitleEnabled;
                    document.querySelector('#IsFeatureSeriesDescriptionEnabled').checked = config.IsFeatureSeriesDescriptionEnabled;
                    document.querySelector('#IsFeatureSeriesStudioEnabled').checked = config.IsFeatureSeriesStudioEnabled;
                    document.querySelector('#IsFeatureSeriesRatingsEnabled').checked = config.IsFeatureSeriesRatingsEnabled;
                    document.querySelector('#IsFeatureSeriesCoverImageEnabled').checked = config.IsFeatureSeriesCoverImageEnabled;
                    document.querySelector('#IsFeatureSeriesBackgroundImageEnabled').checked = config.IsFeatureSeriesBackgroundImageEnabled;
                    
                    document.querySelector('#IsFeatureSeasonTitleEnabled').checked = config.IsFeatureSeasonTitleEnabled;
                    document.querySelector('#IsFeatureSeasonOrderByCrunchyrollOrderEnabled').checked = config.IsFeatureSeasonOrderByCrunchyrollOrderEnabled;
                    
                    document.querySelector('#IsFeatureEpisodeTitleEnabled').checked = config.IsFeatureEpisodeTitleEnabled;
                    document.querySelector('#IsFeatureEpisodeDescriptionEnabled').checked = config.IsFeatureEpisodeDescriptionEnabled;
                    document.querySelector('#IsFeatureEpisodeThumbnailImageEnabled').checked = config.IsFeatureEpisodeThumbnailImageEnabled;
                    document.querySelector('#IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled').checked = config.IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled;
                    
                    document.querySelector('#IsFeatureMovieTitleEnabled').checked = config.IsFeatureMovieTitleEnabled;
                    document.querySelector('#IsFeatureMovieDescriptionEnabled').checked = config.IsFeatureMovieDescriptionEnabled;
                    document.querySelector('#IsFeatureMovieStudioEnabled').checked = config.IsFeatureMovieStudioEnabled;
                    document.querySelector('#IsFeatureMovieThumbnailImageEnabled').checked = config.IsFeatureMovieThumbnailImageEnabled;
                    Dashboard.hideLoadingMsg();
                });
            });

        document.querySelector('#CrunchyrollPluginConfigPage')
            .addEventListener('submit', function(e) {
                Dashboard.showLoadingMsg();
                ApiClient.getPluginConfiguration(CrunchyrollPluginConfig.pluginUniqueId).then(function (config) {
                    config.CrunchyrollUrl = document.querySelector('#CrunchyrollUrl').value;
                    config.ArchiveOrgUrl = document.querySelector('#ArchiveOrgUrl').value;
                    config.LocalDatabasePath = document.querySelector('#LocalDatabasePath').value;
                    config.LibraryName = document.querySelector('#LibraryName').value;
                    config.IsScanInAllLibrariesEnabled = document.querySelector('#IsScanInAllLibrariesEnabled').checked;
                    config.WaybackMachineWaitTimeoutInSeconds = document.querySelector('#WaybackMachineWaitTimeoutInSeconds').value;
                    config.IsWaybackMachineEnabled = document.querySelector('#IsWaybackMachineEnabled').checked;
                    config.IsFeatureCrunchyrollUpdateEnabled = document.querySelector('#IsFeatureCrunchyrollUpdateEnabled').checked;
                    
                    config.IsFeatureSeriesTitleEnabled = document.querySelector('#IsFeatureSeriesTitleEnabled').checked;
                    config.IsFeatureSeriesDescriptionEnabled = document.querySelector('#IsFeatureSeriesDescriptionEnabled').checked;
                    config.IsFeatureSeriesStudioEnabled = document.querySelector('#IsFeatureSeriesStudioEnabled').checked;
                    config.IsFeatureSeriesRatingsEnabled = document.querySelector('#IsFeatureSeriesRatingsEnabled').checked;
                    config.IsFeatureSeriesCoverImageEnabled = document.querySelector('#IsFeatureSeriesCoverImageEnabled').checked;
                    config.IsFeatureSeriesBackgroundImageEnabled = document.querySelector('#IsFeatureSeriesBackgroundImageEnabled').checked;
                    
                    config.IsFeatureSeasonTitleEnabled = document.querySelector('#IsFeatureSeasonTitleEnabled').checked;
                    config.IsFeatureSeasonOrderByCrunchyrollOrderEnabled = document.querySelector('#IsFeatureSeasonOrderByCrunchyrollOrderEnabled').checked;
                    
                    config.IsFeatureEpisodeTitleEnabled = document.querySelector('#IsFeatureEpisodeTitleEnabled').checked;
                    config.IsFeatureEpisodeDescriptionEnabled = document.querySelector('#IsFeatureEpisodeDescriptionEnabled').checked;
                    config.IsFeatureEpisodeThumbnailImageEnabled = document.querySelector('#IsFeatureEpisodeThumbnailImageEnabled').checked;
                    config.IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled = document.querySelector('#IsFeatureEpisodeIncludeSpecialsInNormalSeasonsEnabled').checked;
                    
                    config.IsFeatureMovieTitleEnabled = document.querySelector('#IsFeatureMovieTitleEnabled').checked;
                    config.IsFeatureMovieDescriptionEnabled = document.querySelector('#IsFeatureMovieDescriptionEnabled').checked;
                    config.IsFeatureMovieStudioEnabled = document.querySelector('#IsFeatureMovieStudioEnabled').checked;
                    config.IsFeatureMovieThumbnailImageEnabled = document.querySelector('#IsFeatureMovieThumbnailImageEnabled').checked;
                    ApiClient.updatePluginConfiguration(CrunchyrollPluginConfig.pluginUniqueId, config).then(function (result) {
                        Dashboard.processPluginConfigurationUpdateResult(result);
                    });
                });

                e.preventDefault();
                return false;
            });
    </script>
</div>
</body>
</html>